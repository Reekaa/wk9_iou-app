{"ast":null,"code":"var _jsxFileName = \"/Users/a9886177/Desktop/codeclan_work/week_09/project_iou/iou_app_frontend/src/containers/LoginFormContainer.js\";\nimport { connect } from \"react-redux\";\nimport React from 'react';\nimport Login from '../components/MainPage/Login.js';\nimport { Redirect } from 'react-router-dom';\nimport UserProfileContainer from \"./UserProfileContainer\"; // EXTENSION: INSERT LOGIN FORM HERE\n// TAKE CURRENT USER FOR ABOVE FUNCTION FROM USER INPUT\n// filter the users to return an array of the ones in the relevant group\n\nconst LoginFormContainer = props => {\n  if (props.currentUser.groups) {\n    const groupUsers = props.users.filter(user => {\n      return user.groups[0].groupName === props.currentUser.groups[0].groupName;\n    });\n    props.setGroupUsers(groupUsers);\n  } // let redirect;\n  //\n  // for (let user of props.users) {\n  //   if (user.isCurrent) {\n  //     props.setCurrentUser(user)\n  //     redirect = (\n  //       <Redirect\n  //         to='/profile'\n  //         component={UserProfileContainer}\n  //       />\n  //     )\n  //   }\n  // }\n  // if (redirect) {\n  //   return redirect\n  // }\n\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(Login, {\n    getCurrentUser: props.getCurrentUser,\n    currentUser: props.currentUser,\n    setCurrentUser: props.setCurrentUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }));\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setGroupUsers(groupUsers) {\n    dispatch({\n      type: 'SET_GROUP_USERS',\n      groupUsers\n    });\n  },\n\n  getCurrentUser(name) {\n    dispatch(() => {\n      fetch(\"http://localhost:3000/api/users/\".concat(name)).then(response => response.json()).then(currentUser => {\n        console.log(currentUser);\n        dispatch({\n          type: 'SET_CURRENT_USER',\n          currentUser\n        });\n      });\n    });\n  },\n\n  setCurrentUser(currentUser) {\n    dispatch({\n      type: 'SET_CURRENT_USER',\n      currentUser\n    });\n  }\n\n});\n\nconst mapStateToProps = state => {\n  return {\n    users: state.users,\n    currentUser: state.currentUser\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginFormContainer);","map":{"version":3,"sources":["/Users/a9886177/Desktop/codeclan_work/week_09/project_iou/iou_app_frontend/src/containers/LoginFormContainer.js"],"names":["connect","React","Login","Redirect","UserProfileContainer","LoginFormContainer","props","currentUser","groups","groupUsers","users","filter","user","groupName","setGroupUsers","getCurrentUser","setCurrentUser","mapDispatchToProps","dispatch","type","name","fetch","then","response","json","console","log","mapStateToProps","state"],"mappings":";AAAA,SAASA,OAAT,QAAwB,aAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,iCAAlB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,oBAAP,MAAiC,wBAAjC,C,CAIA;AACA;AACA;;AAGA,MAAMC,kBAAkB,GAAIC,KAAD,IAAW;AAGpC,MAAIA,KAAK,CAACC,WAAN,CAAkBC,MAAtB,EAA+B;AAC7B,UAAMC,UAAU,GAAGH,KAAK,CAACI,KAAN,CAAYC,MAAZ,CAAmBC,IAAI,IAAI;AAC5C,aAAOA,IAAI,CAACJ,MAAL,CAAY,CAAZ,EAAeK,SAAf,KAA6BP,KAAK,CAACC,WAAN,CAAkBC,MAAlB,CAAyB,CAAzB,EAA4BK,SAAhE;AACD,KAFkB,CAAnB;AAGAP,IAAAA,KAAK,CAACQ,aAAN,CAAoBL,UAApB;AACD,GARmC,CAUpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;;;AACA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,oBAAC,KAAD;AACA,IAAA,cAAc,EAAIH,KAAK,CAACS,cADxB;AAEA,IAAA,WAAW,EAAIT,KAAK,CAACC,WAFrB;AAGA,IAAA,cAAc,EAAID,KAAK,CAACU,cAHxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,CADF;AASD,CArCD;;AAuCA,MAAMC,kBAAkB,GAAGC,QAAQ,KAAK;AACtCJ,EAAAA,aAAa,CAACL,UAAD,EAAa;AACxBS,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAE,iBADC;AAEPV,MAAAA;AAFO,KAAD,CAAR;AAID,GANqC;;AAOtCM,EAAAA,cAAc,CAACK,IAAD,EAAO;AACnBF,IAAAA,QAAQ,CAAE,MAAM;AACdG,MAAAA,KAAK,2CAAoCD,IAApC,EAAL,CACCE,IADD,CACOC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EADpB,EAECF,IAFD,CAEOf,WAAD,IAAiB;AACrBkB,QAAAA,OAAO,CAACC,GAAR,CAAYnB,WAAZ;AACAW,QAAAA,QAAQ,CAAC;AACPC,UAAAA,IAAI,EAAE,kBADC;AAEPZ,UAAAA;AAFO,SAAD,CAAR;AAID,OARD;AASD,KAVO,CAAR;AAWD,GAnBqC;;AAoBtCS,EAAAA,cAAc,CAACT,WAAD,EAAc;AAC1BW,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAE,kBADC;AAEPZ,MAAAA;AAFO,KAAD,CAAR;AAID;;AAzBqC,CAAL,CAAnC;;AA4BA,MAAMoB,eAAe,GAAGC,KAAK,IAAI;AAC/B,SAAO;AACLlB,IAAAA,KAAK,EAAEkB,KAAK,CAAClB,KADR;AAELH,IAAAA,WAAW,EAAEqB,KAAK,CAACrB;AAFd,GAAP;AAID,CALD;;AAOA,eAAeP,OAAO,CAAC2B,eAAD,EAAkBV,kBAAlB,CAAP,CAA6CZ,kBAA7C,CAAf","sourcesContent":["import { connect } from \"react-redux\";\nimport React from 'react';\nimport Login from '../components/MainPage/Login.js';\nimport { Redirect } from 'react-router-dom';\nimport UserProfileContainer from \"./UserProfileContainer\";\n\n\n\n// EXTENSION: INSERT LOGIN FORM HERE\n// TAKE CURRENT USER FOR ABOVE FUNCTION FROM USER INPUT\n// filter the users to return an array of the ones in the relevant group\n\n\nconst LoginFormContainer = (props) => {\n\n\n  if (props.currentUser.groups ) {\n    const groupUsers = props.users.filter(user => {\n      return user.groups[0].groupName === props.currentUser.groups[0].groupName;\n    })\n    props.setGroupUsers(groupUsers);\n  }\n\n  // let redirect;\n  //\n  // for (let user of props.users) {\n  //   if (user.isCurrent) {\n  //     props.setCurrentUser(user)\n  //     redirect = (\n  //       <Redirect\n  //         to='/profile'\n  //         component={UserProfileContainer}\n  //       />\n  //     )\n  //   }\n  // }\n\n\n  // if (redirect) {\n  //   return redirect\n  // }\n  return(\n    <div>\n    <Login\n    getCurrentUser = {props.getCurrentUser}\n    currentUser = {props.currentUser}\n    setCurrentUser = {props.setCurrentUser}\n    />\n    </div>\n  )\n}\n\nconst mapDispatchToProps = dispatch => ({\n  setGroupUsers(groupUsers) {\n    dispatch({\n      type: 'SET_GROUP_USERS',\n      groupUsers\n    })\n  },\n  getCurrentUser(name) {\n    dispatch (() => {\n      fetch(`http://localhost:3000/api/users/${name}`)\n      .then((response) => response.json())\n      .then((currentUser) => {\n        console.log(currentUser);\n        dispatch({\n          type: 'SET_CURRENT_USER',\n          currentUser\n        })\n      })\n    })\n  },\n  setCurrentUser(currentUser) {\n    dispatch({\n      type: 'SET_CURRENT_USER',\n      currentUser\n    })\n  }\n})\n\nconst mapStateToProps = state => {\n  return {\n    users: state.users,\n    currentUser: state.currentUser\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginFormContainer);\n"]},"metadata":{},"sourceType":"module"}