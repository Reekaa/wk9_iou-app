{"ast":null,"code":"var _jsxFileName = \"/Users/a9886177/Desktop/codeclan_work/week_09/project_iou/iou_app_frontend/src/containers/LoginFormContainer.js\";\nimport { connect } from \"react-redux\";\nimport React from 'react';\nimport Login from '../components/MainPage/Login.js';\nimport { Redirect } from 'react-router-dom'; // EXTENSION: INSERT LOGIN FORM HERE\n// TAKE CURRENT USER FOR ABOVE FUNCTION FROM USER INPUT\n// filter the users to return an array of the ones in the relevant group\n\nconst LoginFormContainer = props => {\n  if (props.currentUser.groups) {\n    const groupUsers = props.users.filter(user => {\n      return user.groups[0].groupName === props.currentUser.groups[0].groupName;\n    });\n    props.setGroupUsers(groupUsers);\n  }\n\n  let redirect;\n\n  for (let user of props.users) {\n    if (user.isCurrent) {\n      props.setCurrentUser(user);\n      redirect = React.createElement(Redirect, {\n        to: \"/profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27\n        },\n        __self: this\n      });\n    }\n  }\n\n  console.log(props.currentUser.user);\n\n  if (redirect) {\n    return redirect;\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(Login, {\n    getCurrentUser: props.getCurrentUser,\n    currentUser: props.currentUser,\n    setCurrentUser: props.setCurrentUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }));\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setGroupUsers(groupUsers) {\n    dispatch({\n      type: 'SET_GROUP_USERS',\n      groupUsers\n    });\n  },\n\n  getCurrentUser(name) {\n    dispatch(() => {\n      fetch(\"http://localhost:3000/api/users/\".concat(name)).then(response => response.json()).then(currentUser => {\n        console.log(currentUser);\n        dispatch({\n          type: 'SET_CURRENT_USER',\n          currentUser\n        });\n      });\n    });\n  },\n\n  setCurrentUser(currentUser) {\n    dispatch({\n      type: 'SET_CURRENT_USER',\n      currentUser\n    });\n  }\n\n});\n\nconst mapStateToProps = state => {\n  return {\n    users: state.users,\n    currentUser: state.currentUser\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginFormContainer);","map":{"version":3,"sources":["/Users/a9886177/Desktop/codeclan_work/week_09/project_iou/iou_app_frontend/src/containers/LoginFormContainer.js"],"names":["connect","React","Login","Redirect","LoginFormContainer","props","currentUser","groups","groupUsers","users","filter","user","groupName","setGroupUsers","redirect","isCurrent","setCurrentUser","console","log","getCurrentUser","mapDispatchToProps","dispatch","type","name","fetch","then","response","json","mapStateToProps","state"],"mappings":";AAAA,SAASA,OAAT,QAAwB,aAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,iCAAlB;AACA,SAASC,QAAT,QAAyB,kBAAzB,C,CAGA;AACA;AACA;;AAGA,MAAMC,kBAAkB,GAAIC,KAAD,IAAW;AAGpC,MAAIA,KAAK,CAACC,WAAN,CAAkBC,MAAtB,EAA+B;AAC7B,UAAMC,UAAU,GAAGH,KAAK,CAACI,KAAN,CAAYC,MAAZ,CAAmBC,IAAI,IAAI;AAC5C,aAAOA,IAAI,CAACJ,MAAL,CAAY,CAAZ,EAAeK,SAAf,KAA6BP,KAAK,CAACC,WAAN,CAAkBC,MAAlB,CAAyB,CAAzB,EAA4BK,SAAhE;AACD,KAFkB,CAAnB;AAGAP,IAAAA,KAAK,CAACQ,aAAN,CAAoBL,UAApB;AACD;;AAED,MAAIM,QAAJ;;AAEA,OAAK,IAAIH,IAAT,IAAiBN,KAAK,CAACI,KAAvB,EAA8B;AAC5B,QAAIE,IAAI,CAACI,SAAT,EAAoB;AAClBV,MAAAA,KAAK,CAACW,cAAN,CAAqBL,IAArB;AACAG,MAAAA,QAAQ,GAAI,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,UAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAZ;AACD;AACF;;AAGDG,EAAAA,OAAO,CAACC,GAAR,CAAYb,KAAK,CAACC,WAAN,CAAkBK,IAA9B;;AAEA,MAAIG,QAAJ,EAAc;AACZ,WAAOA,QAAP;AACD;;AACD,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,oBAAC,KAAD;AACA,IAAA,cAAc,EAAIT,KAAK,CAACc,cADxB;AAEA,IAAA,WAAW,EAAId,KAAK,CAACC,WAFrB;AAGA,IAAA,cAAc,EAAID,KAAK,CAACW,cAHxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,CADF;AASD,CAlCD;;AAoCA,MAAMI,kBAAkB,GAAGC,QAAQ,KAAK;AACtCR,EAAAA,aAAa,CAACL,UAAD,EAAa;AACxBa,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAE,iBADC;AAEPd,MAAAA;AAFO,KAAD,CAAR;AAID,GANqC;;AAOtCW,EAAAA,cAAc,CAACI,IAAD,EAAO;AACnBF,IAAAA,QAAQ,CAAE,MAAM;AACdG,MAAAA,KAAK,2CAAoCD,IAApC,EAAL,CACCE,IADD,CACOC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EADpB,EAECF,IAFD,CAEOnB,WAAD,IAAiB;AACrBW,QAAAA,OAAO,CAACC,GAAR,CAAYZ,WAAZ;AACAe,QAAAA,QAAQ,CAAC;AACPC,UAAAA,IAAI,EAAE,kBADC;AAEPhB,UAAAA;AAFO,SAAD,CAAR;AAID,OARD;AASD,KAVO,CAAR;AAWD,GAnBqC;;AAoBtCU,EAAAA,cAAc,CAACV,WAAD,EAAc;AAC1Be,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAE,kBADC;AAEPhB,MAAAA;AAFO,KAAD,CAAR;AAID;;AAzBqC,CAAL,CAAnC;;AA4BA,MAAMsB,eAAe,GAAGC,KAAK,IAAI;AAC/B,SAAO;AACLpB,IAAAA,KAAK,EAAEoB,KAAK,CAACpB,KADR;AAELH,IAAAA,WAAW,EAAEuB,KAAK,CAACvB;AAFd,GAAP;AAID,CALD;;AAOA,eAAeN,OAAO,CAAC4B,eAAD,EAAkBR,kBAAlB,CAAP,CAA6ChB,kBAA7C,CAAf","sourcesContent":["import { connect } from \"react-redux\";\nimport React from 'react';\nimport Login from '../components/MainPage/Login.js';\nimport { Redirect } from 'react-router-dom';\n\n\n// EXTENSION: INSERT LOGIN FORM HERE\n// TAKE CURRENT USER FOR ABOVE FUNCTION FROM USER INPUT\n// filter the users to return an array of the ones in the relevant group\n\n\nconst LoginFormContainer = (props) => {\n\n\n  if (props.currentUser.groups ) {\n    const groupUsers = props.users.filter(user => {\n      return user.groups[0].groupName === props.currentUser.groups[0].groupName;\n    })\n    props.setGroupUsers(groupUsers);\n  }\n\n  let redirect;\n\n  for (let user of props.users) {\n    if (user.isCurrent) {\n      props.setCurrentUser(user)\n      redirect = (<Redirect to='/profile' />)\n    }\n  }\n\n\n  console.log(props.currentUser.user);\n\n  if (redirect) {\n    return redirect\n  }\n  return(\n    <div>\n    <Login\n    getCurrentUser = {props.getCurrentUser}\n    currentUser = {props.currentUser}\n    setCurrentUser = {props.setCurrentUser}\n    />\n    </div>\n  )\n}\n\nconst mapDispatchToProps = dispatch => ({\n  setGroupUsers(groupUsers) {\n    dispatch({\n      type: 'SET_GROUP_USERS',\n      groupUsers\n    })\n  },\n  getCurrentUser(name) {\n    dispatch (() => {\n      fetch(`http://localhost:3000/api/users/${name}`)\n      .then((response) => response.json())\n      .then((currentUser) => {\n        console.log(currentUser);\n        dispatch({\n          type: 'SET_CURRENT_USER',\n          currentUser\n        })\n      })\n    })\n  },\n  setCurrentUser(currentUser) {\n    dispatch({\n      type: 'SET_CURRENT_USER',\n      currentUser\n    })\n  }\n})\n\nconst mapStateToProps = state => {\n  return {\n    users: state.users,\n    currentUser: state.currentUser\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginFormContainer);\n"]},"metadata":{},"sourceType":"module"}